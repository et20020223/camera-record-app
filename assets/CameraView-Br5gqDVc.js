import{d as f,r,c as v,a as e,b as p,t as g,o as _,_ as y}from"./index-Qri3TH_p.js";const x={class:"camera"},w={style:{padding:"32px","max-width":"500px",margin:"auto"}},k={class:"video-container"},C={class:"controls",style:{margin:"16px 0","text-align":"center"}},R=["disabled"],B=["disabled"],U=["disabled"],V={key:0,class:"result",style:{"margin-top":"24px"}},M=["src"],S=["href"],j={key:1,class:"error",style:{"margin-top":"16px"}},D=f({__name:"CameraView",setup(L){const c=r(null),l=r(!1),o=r(!1),n=r(""),a=r("");let i=null,s=null,u=[];const m=async()=>{if(!l.value)try{a.value="",i=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1}),c.value&&(c.value.srcObject=i),l.value=!0}catch(t){console.error("無法訪問攝像頭:",t),a.value="無法訪問攝像頭，請確保已授權攝像頭權限"}},b=()=>{if(i)try{u=[],s=new MediaRecorder(i),s.ondataavailable=t=>{t.data.size>0&&u.push(t.data)},s.onstop=()=>{const t=new Blob(u,{type:"video/webm"});n.value=URL.createObjectURL(t)},s.start(),o.value=!0,a.value=""}catch(t){console.error("錄影啟動失敗:",t),a.value="錄影啟動失敗，請重試"}},h=()=>{s&&o.value&&(s.stop(),o.value=!1)};return(t,d)=>(_(),v("div",x,[e("div",w,[d[1]||(d[1]=e("h1",null,"相機錄影功能",-1)),e("div",k,[e("video",{ref_key:"video",ref:c,autoplay:"",playsinline:"",width:"400",height:"300",style:{background:"#111","border-radius":"8px","margin-bottom":"16px"}},null,512)]),e("div",C,[e("button",{onClick:m,disabled:l.value,class:"btn primary"},"開啟鏡頭",8,R),e("button",{onClick:b,disabled:!l.value||o.value,class:"btn success"}," 開始錄影 ",8,B),e("button",{onClick:h,disabled:!o.value,class:"btn danger"},"停止錄影",8,U)]),n.value?(_(),v("div",V,[d[0]||(d[0]=e("h3",null,"錄影結果",-1)),e("video",{src:n.value,controls:"",width:"400",height:"300",style:{"border-radius":"8px","margin-bottom":"12px"}},null,8,M),e("div",null,[e("a",{href:n.value,download:"recorded-video.webm",class:"download-btn"}," 下載影片 ",8,S)])])):p("",!0),a.value?(_(),v("div",j,[e("p",null,g(a.value),1)])):p("",!0)])]))}}),O=y(D,[["__scopeId","data-v-7b5ccc10"]]);export{O as default};
